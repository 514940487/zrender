<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Path to Polygon</title>
    <script src="lib/rollup.browser.js"></script>
    <script src="lib/requireES.js"></script>
    <script src="lib/config.js"></script>
</head>
<body>
    <style>
        html, bod {
            width: 100%;
            height: 100%;
            margin: 0;
        }
    </style>
    <canvas id="main" width="800" height="800"></canvas>
    <script>
        requireES([
            "zrender/lib/core/PathProxy",
            "zrender/lib/tool/morphPath"
        ], function(PathProxy, {pathToPolygons}) {

            const canvas = document.querySelector('#main');
            const ctx = canvas.getContext('2d');

            function drawPolygon(data) {
                ctx.beginPath();
                ctx.moveTo(data[0], data[1])
                for (let i = 2; i < data.length;) {
                    ctx.lineTo(data[i++], data[i++]);
                }
            }

            function buildCircle() {
                const circleArgs = [200, 200, 100, 0, Math.PI * 2, true];
                const circlePath = new PathProxy.default();
                circlePath.beginPath();
                circlePath.arc.apply(circlePath, circleArgs);

                console.time('pathToPolygons');
                const polygon = pathToPolygons(circlePath);
                console.timeEnd('pathToPolygons');

                ctx.beginPath();
                ctx.arc.apply(ctx, circleArgs);
                ctx.strokeStyle = 'green';
                ctx.lineWidth = 2;
                ctx.stroke();

                ctx.strokeStyle = 'red';
                ctx.lineWidth = 1;
                drawPolygon(polygon[0]);
                ctx.stroke();

                return polygon;
            }

            const circleCurves = buildCircle();

        });
    </script>
</body>
</html>